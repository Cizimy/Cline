# コントリビューションガイド

## 開発フロー

1. 最新のmainブランチを取得
2. 機能ブランチを作成
3. 変更をコミット
4. プルリクエストを作成

## タスク引継ぎ手順

1. タスク開始時

   - 最新の引継ぎ文書を確認
   - 未完了タスクを把握
   - 関連する過去の引継ぎ文書を参照

2. タスク実行中

   - 変更点を記録
   - 次のステップを整理
   - 問題点をドキュメント化

3. タスク完了時
   - 新しい引継ぎ文書を作成
   - 前回の文書をアーカイブ
   - 変更をコミット＆プッシュ

詳細は[引継ぎガイドライン](docs/HANDOVER_GUIDELINES.md)を参照してください。

## コーディング規約

1. コードスタイル

   - ESLintの設定に従う

     ```bash
     # ESLintによるチェック
     npx eslint .

     # 自動修正可能な問題を修正
     npx eslint . --fix
     ```

   - Prettierでフォーマット

     ```bash
     # コードのフォーマット
     npx prettier --write .

     # フォーマットチェックのみ
     npx prettier --check .
     ```

   - TypeScriptの型定義を厳密に使用

2. コミットメッセージ

   - 形式: `type(scope): description`
   - 例: `feat(core): add new validation logic`

3. テスト要件
   - 新機能には必ずテストを追加
   - 既存のテストが失敗しないことを確認
   - カバレッジ目標: 80%以上を維持
   - テストファイルの配置:
     - ユニットテスト: `tests/unit/`
     - 統合テスト: `tests/integration/`
   - テストファイル命名: `*.test.ts`
   - モックの設定は各テストファイル内で完結

## CI/CDワークフロー

1. 自動テスト

   - プッシュ時に自動実行
   - プルリクエスト時に自動実行
   - Node.js v20.x環境での実行
   - テストカバレッジの自動計測（目標: 80%以上）

2. 成果物

   - カバレッジレポートの自動生成
   - 成果物のアップロード（actions/upload-artifact@v4）
   - レポートの保存期間: 14日
   - 圧縮レベル: 最大（9）

3. 環境設定
   - Node.js: v20.x
   - npm: 最新安定版
   - 必要な環境変数は.github/workflows/ci.ymlで設定

## プルリクエスト

1. 説明

   - 変更内容の概要
   - 関連するIssue番号
   - スクリーンショット（UI変更の場合）

2. レビュー

   - 最低2人の承認が必要
   - コメントは具体的に
   - 改善提案は建設的に

3. マージ前チェックリスト
   - [ ] すべてのテストが成功
   - [ ] CIワークフローが成功
   - [ ] カバレッジ要件を満たしている（80%以上）
   - [ ] ESLintチェックが成功
   - [ ] Prettierフォーマットが適用済み
   - [ ] ドキュメントが更新済み
   - [ ] コンフリクトが解消済み
   - [ ] レビュー承認が完了

## トラブルシューティング

1. ビルドエラー

   - `npm install`を再実行
   - キャッシュクリア: `npm cache clean --force`
   - 依存関係の更新: `npm update`

2. テスト失敗

   - ローカル環境で再現
   - 関連する変更を確認
   - 必要に応じてテストを修正
   - CIログの確認

3. CI/CDの問題

   - ワークフローの実行ログを確認
   - 環境変数の設定を確認
   - 必要に応じてワークフローを再実行
   - アーティファクトのアップロード状況を確認

4. コードスタイルの問題

   - ESLintエラーの確認と修正
   - Prettierによるフォーマット
   - 型定義の問題はTypeScriptコンパイラのエラーを確認

5. その他
   - ドキュメントを参照
   - チームメンバーに相談
   - Issueを作成して記録
