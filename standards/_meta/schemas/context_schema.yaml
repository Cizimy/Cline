# コンテキスト定義スキーマ

version: "1.0.0"
type: "context_schema"

# コンテキストタイプの定義
context_types:
  global:
    description: "グローバルコンテキスト定義"
    required_fields:
      - name: "version"
        type: "string"
        description: "コンテキストのバージョン"
      - name: "environment"
        type: "object"
        description: "グローバル環境設定"
      - name: "shared_resources"
        type: "object"
        description: "共有リソース定義"
  
  mcp:
    description: "MCPサーバー固有のコンテキスト"
    required_fields:
      - name: "required_knowledge"
        type: "object"
        description: "必要な知識ベース"
      - name: "state_tracking"
        type: "object"
        description: "状態追跡情報"
      - name: "memory_requirements"
        type: "object"
        description: "メモリ要件"
      - name: "operation_patterns"
        type: "object"
        description: "操作パターン"
  
  process:
    description: "プロセス実行コンテキスト"
    required_fields:
      - name: "execution_environment"
        type: "object"
        description: "実行環境設定"
      - name: "execution_phases"
        type: "object"
        description: "実行フェーズ定義"
      - name: "decision_criteria"
        type: "object"
        description: "判断基準"

# 状態管理の定義
state_schema:
  type: "object"
  required_fields:
    - name: "tracked_states"
      type: "array"
      description: "追跡する状態のリスト"
    - name: "state_transitions"
      type: "array"
      description: "状態遷移の定義"
    - name: "validation_points"
      type: "array"
      description: "状態検証ポイント"

# メモリ要件の定義
memory_schema:
  type: "object"
  required_fields:
    - name: "storage_type"
      type: "string"
      enum: ["persistent", "temporary", "learning"]
    - name: "storage_location"
      type: "string"
      description: "保存場所"
    - name: "update_policy"
      type: "object"
      description: "更新ポリシー"

# 実行環境の定義
environment_schema:
  type: "object"
  required_fields:
    - name: "required_tools"
      type: "array"
      description: "必要なツール一覧"
    - name: "working_directory"
      type: "string"
      description: "作業ディレクトリ"
    - name: "environment_variables"
      type: "object"
      description: "環境変数設定"

# 相互作用の定義
interaction_schema:
  type: "object"
  required_fields:
    - name: "dependencies"
      type: "object"
      description: "依存関係の定義"
    - name: "data_sharing"
      type: "object"
      description: "データ共有方式"
    - name: "communication_patterns"
      type: "object"
      description: "通信パターン"

# エラーハンドリングの定義
error_handling_schema:
  type: "object"
  required_fields:
    - name: "error_categories"
      type: "object"
      description: "エラーカテゴリ定義"
    - name: "recovery_strategies"
      type: "object"
      description: "回復戦略"
    - name: "logging_requirements"
      type: "object"
      description: "ログ要件"

# 検証ルールの定義
validation_rules_schema:
  type: "object"
  required_fields:
    - name: "mode"
      type: "string"
      enum: ["strict", "flexible"]
    - name: "conditions"
      type: "array"
      description: "検証条件"
    - name: "success_criteria"
      type: "array"
      description: "成功基準"

# 出力管理の定義
output_management_schema:
  type: "object"
  required_fields:
    - name: "log_levels"
      type: "array"
      description: "ログレベル設定"
    - name: "artifacts"
      type: "array"
      description: "成果物定義"
    - name: "reporting_requirements"
      type: "object"
      description: "レポート要件"

# 更新履歴
history:
  - version: "1.0.0"
    date: "2025-01-11"
    description: "初期バージョン"
    author: "Cline AI"